#!/bin/bash
#doom
#                 _       _
#                (_)     | |
#   ___  ___ _ __ _ _ __ | |_
#  / __|/ __| '__| | '_ \| __|
#  \__ \ (__| |  | | |_) | |_
#  |___/\___|_|  |_| .__/ \__|
#                  | |
#                  |_|
#ANSI shadow
#  ███╗   ██╗ █████╗ ███╗   ███╗███████╗
#  ████╗  ██║██╔══██╗████╗ ████║██╔════╝
#  ██╔██╗ ██║███████║██╔████╔██║█████╗
#  ██║╚██╗██║██╔══██║██║╚██╔╝██║██╔══╝
#  ██║ ╚████║██║  ██║██║ ╚═╝ ██║███████╗
#  ╚═╝  ╚═══╝╚═╝  ╚═╝╚═╝     ╚═╝╚══════╝
#=======================================================================================
#=== DESCIPTION ========================================================================
#=======================================================================================
	## Gathers a list of recovery points for a UID
	## 
	## 
#=======================================================================================
#=======================================================================================
	#
	#*************** NEED TO DO/ADD ***********************
	#
	#
	###
	# how to hit the API		curl -u USER:PASS --silent 'API URL' --data '{"params":{"accnt":"account_status"}}'
	#******************************************************
	#
#///////////////////////////////////////////////////////////////////////////////////////
#|||||||||||||||||||||||| Script Stuff Starts |||||||||||||||||||||||||||||||||||||||||
#\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
###### RUN function #######
###########################
function main(){		###
	userSetup			###
	guardianPoke		###
}						###
###########################
#------ error handling ----------
### If error, give up			#
#set -e							#
#- - - - - - - - - - - - - - - -#
### if error, do THING			#
# makes trap global 			#
#set -o errtrace				#
# 'exit' can be a func or cmd	#
#trap 'exit' ERR				#
#--------------------------------

###########################################################################################
######  ┌─┐┬ ┬┌─┐┬─┐┌┬┐┬┌─┐┌┐┌╔═╗┌─┐┬┌─┌─┐  ###############################################
######  │ ┬│ │├─┤├┬┘ │││├─┤│││╠═╝│ │├┴┐├┤   ###############################################
######  └─┘└─┘┴ ┴┴└──┴┘┴┴ ┴┘└┘╩  └─┘┴ ┴└─┘  ###############################################
# grabs the policy list from billing api ##################################################
###########################################################################################
function guardianPoke(){
	curlCMD https://api.int.liquidweb.com/bleed/Guardian/RecoveryPoint/list uniq_id $1 JCW7D6
	echo "$cmdOutput"
}

###########################################################################################
######  ┬ ┬┌─┐┌─┐┬─┐╔═╗┌─┐┌┬┐┬ ┬┌─┐	#######################################################
######  │ │└─┐├┤ ├┬┘╚═╗├┤  │ │ │├─┘	#######################################################
######  └─┘└─┘└─┘┴└─╚═╝└─┘ ┴ └─┘┴  	#######################################################
# setting up user variables and what not ##################################################
###########################################################################################
function userSetup(){
	userName="$(cat $HOME/.passwords/billing.userName)"
	password="$(cat $HOME/.passwords/billing)"
}
###########################################################################################
######  ┌─┐┬ ┬┬─┐┬  ╔═╗╔╦╗╔╦╗  ############################################################
######  │  │ │├┬┘│  ║  ║║║ ║║  ############################################################
######  └─┘└─┘┴└─┴─┘╚═╝╩ ╩═╩╝  ############################################################
# Making it easier to deal with the curl command ##########################################
###########################################################################################
function curlCMD(){
	# turning the arguments passed into the function into something more readable
		apiURL="$1"
		apiParam="$2"
		apiValue="$3"
		api_jqSearch="$4"
		
	### Building the actual command to hit the API ###
		cmdBase="$(cat <<- EOF
			curl -u $userName:$password
			EOF
			)"
		cmdURL="$(cat <<- EOF
			--silent $apiURL
			EOF
			)"
		cmdData="$(cat <<- EOF
			--data {"params":{"$apiParam":"$apiValue"}}
			EOF
			)"
		cmdParse="$(cat <<- EOF
			jq -r $api_jqSearch
			EOF
			)"
	
	### storing the output ###	
	if [ "$4" == "" ];then
		cmdOutput="$($cmdBase $cmdURL $cmdData)"
	else
		cmdOutput="$($cmdBase $cmdURL $cmdData | $cmdParse)"
	fi	
}
###########################################################################################
######  ╔═╗┬ ┬┌┐┌┌─┐┌┬┐┬┌─┐┌┐┌  ╔═╗┌┐┌┌─┐  ################################################
######  ╠╣ │ │││││   │ ││ ││││  ║ ║│││├┤   ################################################
######  ╚  └─┘┘└┘└─┘ ┴ ┴└─┘┘└┘  ╚═╝┘└┘└─┘  ################################################
#Calvin S
# FUNCTION1 description ###################################################################
###########################################################################################
function function1(){
	:
	#### PART 1 ############################
	
	}
###########################################################################################
######  ╔═╗┬ ┬┌┐┌┌─┐┌┬┐┬┌─┐┌┐┌  ╔╦╗┬ ┬┌─┐  ################################################
######  ╠╣ │ │││││   │ ││ ││││   ║ ││││ │  ################################################
######  ╚  └─┘┘└┘└─┘ ┴ ┴└─┘┘└┘   ╩ └┴┘└─┘  ################################################
# FUNCTION2 description ###################################################################
###########################################################################################
function function2(){
	:
	#### PART 1 ############################
	
	}
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
#+++++++++++++++++++++++++++++++++ FIGHT!! +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

main
