#!/bin/bash
#doom
#                 _       _
#                (_)     | |
#   ___  ___ _ __ _ _ __ | |_
#  / __|/ __| '__| | '_ \| __|
#  \__ \ (__| |  | | |_) | |_
#  |___/\___|_|  |_| .__/ \__|
#                  | |
#                  |_|
#ANSI shadow
#  ███╗   ██╗ █████╗ ███╗   ███╗███████╗
#  ████╗  ██║██╔══██╗████╗ ████║██╔════╝
#  ██╔██╗ ██║███████║██╔████╔██║█████╗
#  ██║╚██╗██║██╔══██║██║╚██╔╝██║██╔══╝
#  ██║ ╚████║██║  ██║██║ ╚═╝ ██║███████╗
#  ╚═╝  ╚═══╝╚═╝  ╚═╝╚═╝     ╚═╝╚══════╝
#=======================================================================================
#=== DESCIPTION ========================================================================
#=======================================================================================
	## Paste parsing for turning the paste info from billing into more useful bits of info
	## 
	## 
#=======================================================================================
#=======================================================================================
	#	/tmp/pasteInfoList.delete
	#
	#*************** NEED TO DO/ADD ***********************
	### basic multi-line regex to sniff out whether or not it's paste info 
	# (INCOMPLETE)
	### LINE 1 --------------------------------------------
	#	^\*(([0-z]+\.)+\S+) `([0-Z]{6})` (.+)\*
	### LINE 2 --------------------------------------------
	# will need some sort of if/then (possibly)
	## vps	
	#	(([0-z]+\.)+\S+) :: ([0-Z]+) :: ((\d{1,3}\.){3}\d{1,3})
	## dedi
	#	([0-Z]+) :: ((\d{1,3}\.){3}\d{1,3})
	### LINE 3 --------------------------------------------
	#	(https.+uniq_id=.+)
	### LINE 4 --------------------------------------------
	#	(https.+search=.+)
	#======================================================
	########### VPS Full Line #############################
	#	^\*(([0-z]+\.)+\S+) `([0-Z]{6})` (.+)\*$(([0-z]+\.)+\S+) :: ([0-Z]+) :: ((\d{1,3}\.){3}\d{1,3})$https.+uniq_id=.+$https.+search=.+$
	#	^\*(([0-z]+\.)+\S+) `([0-Z]{6})` (.+)\*:(([0-z]+\.)+\S+) :: ([0-Z]+) :: ((\d{1,3}\.){3}\d{1,3}):https.+uniq_id=.+:https.+search=.+
	########### Dedi Full Line ############################
	#******************************************************
	
#### replacing \n with :: for parsibility ####
# tr '\n' ':' < /tmp/pasteInfoList.delete
# tr '\n' ':' < /tmp/paste2

#### tr + full vps + grep test ####
# tr '\n' '\:\:' < /tmp/paste2 | grep -P '^\*(([0-z]+\.)+\S+) `([0-Z]{6})` (.+)\*:(([0-z]+\.)+\S+) :: ([0-Z]+) :: ((\d{1,3}\.){3}\d{1,3}):https.+uniq_id=.+:https.+search=.+'

#### tr + full vps + perl purge ####
# tr '\n' '\:\:' < /tmp/paste2 | perl -pe 's/^\*(([0-z]+\.)+\S+) `([0-Z]{6})` (.+)\*:(([0-z]+\.)+\S+) :: ([0-Z]+) :: ((\d{1,3}\.){3}\d{1,3}):https.+uniq_id=.+:https.+search=.+/\1\n\3\nParent: \5\nLocation: \7\n/g'
	
#///////////////////////////////////////////////////////////////////////////////////////
#|||||||||||||||||||||||| Script Stuff Starts |||||||||||||||||||||||||||||||||||||||||
#\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
###### RUN function #######
###########################
function main(){		###
	basicBitch			###
	function2			###
}						###
###########################
#------ error handling ----------
### If error, give up			#
#set -e							#
#- - - - - - - - - - - - - - - -#
### if error, do THING			#
# makes trap global 			#
#set -o errtrace				#
# 'exit' can be a func or cmd	#
#trap 'exit' ERR				#
#--------------------------------
###########################################################################################
######  ╔═╗┬ ┬┌┐┌┌─┐┌┬┐┬┌─┐┌┐┌  ╔═╗┌┐┌┌─┐  ################################################
######  ╠╣ │ │││││   │ ││ ││││  ║ ║│││├┤   ################################################
######  ╚  └─┘┘└┘└─┘ ┴ ┴└─┘┘└┘  ╚═╝┘└┘└─┘  ################################################
#Calvin S
# basicBitch description ###################################################################
###########################################################################################
function basicBitch(){
	:
	#### PART 1  - VPS ############################
	tr '\n' '\:' < /tmp/paste2 |\
	perl -pe 's/^\*(([0-z]+\.)+\S+) `([0-Z]{6})` (.+)\*:(([0-z]+\.)+\S+) :: ([0-Z]+) :: ((\d{1,3}\.){3}\d{1,3}):https.+uniq_id=.+:https.+search=.+/
		--(Instance | VPS | MWP)--\n
		\1\n
		\3\n
		\8\n
		\7\n
		--(Parent | Guardian_backup_manager)--\n
		\5\n
		/g'
		
	#testing one line
	tr '\n' '\:' < /tmp/paste2 |perl -pe 's/^\*(([0-z]+\.)+\S+) `([0-Z]{6})` (.+)\*:(([0-z]+\.)+\S+) :: ([0-Z]+) :: ((\d{1,3}\.){3}\d{1,3}):https.+uniq_id=.+:https.+search=.+/--(Instance | VPS | MWP)--\n\1\n\3\n\8\n\7\n--(Parent | Guardian_backup_manager)--\n\5\n/g'
	
	#### PART 2  - Dedicated ############################
	tr '\n' '\:' < /tmp/paste2 |\
	perl -pe 's/^\*(([0-z]+\.)+\S+) `([0-Z]{6})` (.+)\*:(([0-z]+\.)+\S+) ([0-Z]{9}) :: ((\d{1,3}\.){3}\d{1,3}):https.+uniq_id=.+:https.+search=.+/
		--(Instance | VPS | MWP)--\n
		\1\n
		\3\n
		\8\n
		\7\n
		--(Parent | Guardian_backup_manager)--\n
		\5\n
		/g'
	}
###########################################################################################
######  ╔═╗┬ ┬┌┐┌┌─┐┌┬┐┬┌─┐┌┐┌  ╔╦╗┬ ┬┌─┐  ################################################
######  ╠╣ │ │││││   │ ││ ││││   ║ ││││ │  ################################################
######  ╚  └─┘┘└┘└─┘ ┴ ┴└─┘┘└┘   ╩ └┴┘└─┘  ################################################
# FUNCTION2 description ###################################################################
###########################################################################################
function function2(){
	:
	#### PART 1 ############################
	
	}
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
#+++++++++++++++++++++++++++++++++ FIGHT!! +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

main
